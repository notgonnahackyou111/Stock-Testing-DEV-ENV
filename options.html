<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options - Stock Testing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 28px;
        }

        .header button {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .header button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .option-group {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid #eee;
        }

        .option-group:last-child {
            border-bottom: none;
        }

        .option-group h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .option-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .input-wrapper {
            display: flex;
            flex-direction: column;
        }

        .input-wrapper label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .input-wrapper input,
        .input-wrapper select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .input-wrapper input:focus,
        .input-wrapper select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .radio-option label {
            cursor: pointer;
            margin: 0;
        }

        .info-box {
            background: #f0f7ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 13px;
            color: #333;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        button.btn-start {
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        button.btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        button.btn-cancel {
            padding: 15px 40px;
            background: #e5e7eb;
            color: #333;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        button.btn-cancel:hover {
            background: #d1d5db;
        }

        .emoji {
            font-size: 20px;
        }

        .summary-box {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #ddd;
        }

        .summary-box h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            color: #666;
        }

        .summary-item strong {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öôÔ∏è Game Options</h1>
        <button onclick="goHome()">‚Üê Back</button>
    </div>

    <div class="container">
        <!-- Starting Capital -->
        <div class="option-group">
            <h2><span class="emoji">üí∞</span> Starting Capital</h2>
            <p class="option-description">Choose how much virtual money you want to start with</p>
            <div class="input-wrapper">
                <label>Starting Capital ($)</label>
                <input type="number" id="startingCapital" value="25000" min="5000" step="1000">
            </div>
            <div class="info-box">
                üí° Tip: Higher starting capital gives you more flexibility but also requires better strategy to maintain profits.
            </div>
        </div>

        <!-- Risk Level -->
        <div class="option-group">
            <h2><span class="emoji">üéØ</span> Risk Level</h2>
            <p class="option-description">Affects stock volatility and potential gains/losses</p>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="conservative" name="riskLevel" value="conservative" checked>
                    <label for="conservative"><strong>Conservative</strong><br><span style="font-size: 12px; color: #666;">Low volatility, stable</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="moderate" name="riskLevel" value="moderate">
                    <label for="moderate"><strong>Moderate</strong><br><span style="font-size: 12px; color: #666;">Balanced risk/reward</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="aggressive" name="riskLevel" value="aggressive">
                    <label for="aggressive"><strong>Aggressive</strong><br><span style="font-size: 12px; color: #666;">High volatility, high gains</span></label>
                </div>
            </div>
            <div class="info-box">
                üìä Stock volatility multiplier: Conservative=0.5x | Moderate=1.0x | Aggressive=1.8x
            </div>
        </div>

        <!-- Game Mode -->
        <div class="option-group">
            <h2><span class="emoji">üéÆ</span> Game Mode</h2>
            <p class="option-description">Select your trading experience style</p>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="classic" name="mode" value="classic" checked>
                    <label for="classic"><strong>Classic</strong><br><span style="font-size: 12px; color: #666;">Standard trading</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="challenge" name="mode" value="challenge">
                    <label for="challenge"><strong>Challenge</strong><br><span style="font-size: 12px; color: #666;">Meet daily targets</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="portfolio" name="mode" value="portfolio">
                    <label for="portfolio"><strong>Portfolio</strong><br><span style="font-size: 12px; color: #666;">Build balanced portfolio</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="daytrader" name="mode" value="daytrader">
                    <label for="daytrader"><strong>Day Trader</strong><br><span style="font-size: 12px; color: #666;">Fast-paced intraday</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="custom" name="mode" value="custom">
                    <label for="custom"><strong>Custom Challenge</strong><br><span style="font-size: 12px; color: #666;">$10k start; set weeks limit</span></label>
                </div>
            </div>
        </div>

        <!-- Difficulty -->
        <div class="option-group">
            <h2><span class="emoji">‚≠ê</span> Difficulty</h2>
            <p class="option-description">Adjust market behavior and starting capital</p>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="easy" name="difficulty" value="easy">
                    <label for="easy"><strong>Easy</strong><br><span style="font-size: 12px; color: #666;">$50,000 start, stable</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="medium" name="difficulty" value="medium" checked>
                    <label for="medium"><strong>Medium</strong><br><span style="font-size: 12px; color: #666;">$25,000 start, normal</span></label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="hard" name="difficulty" value="hard">
                    <label for="hard"><strong>Hard</strong><br><span style="font-size: 12px; color: #666;">$10,000 start, volatile</span></label>
                </div>
            </div>
        </div>

        <!-- Miscellaneous -->
        <div class="option-group">
            <h2><span class="emoji">üìÖ</span> Display Options</h2>
            <p class="option-description">Toggle extra information in the game UI</p>
            <div class="input-wrapper">
                <label><input type="checkbox" id="showDayCounter"> Show game day counter</label>
            </div>
        </div>

        <!-- Custom challenge weeks -->
        <div class="option-group" id="customWeeksGroup" style="display:none;">
            <h2><span class="emoji">‚è±Ô∏è</span> Custom Weeks</h2>
            <p class="option-description">How many weeks do you have to grow $10,000?</p>
            <div class="input-wrapper">
                <label>Weeks:</label>
                <input type="number" id="weekLimit" min="1" max="52" step="1" value="1">
            </div>
            <div class="info-box">
                üéØ You start with $10,000; all other options are ignored when this mode is selected.
            </div>
        </div>

        <!-- Summary -->
        <div class="summary-box">
            <h3>Your Configuration</h3>
            <div class="summary-item">
                <span>Capital:</span>
                <strong>$<span id="summaryCapital">25000</span></strong>
            </div>
            <div class="summary-item">
                <span>Risk Level:</span>
                <strong><span id="summaryRisk">Moderate</span></strong>
            </div>
            <div class="summary-item">
                <span>Mode:</span>
                <strong><span id="summaryMode">Classic</span></strong>
            </div>
            <div class="summary-item">
                <span>Difficulty:</span>
                <strong><span id="summaryDifficulty">Medium</span></strong>
            </div>
            <div class="summary-item">
                <span>Day Counter:</span>
                <strong><span id="summaryDayCounter">off</span></strong>
            </div>
            <div class="summary-item" id="summaryWeekLimitRow" style="display:none;">
                <span>Week Limit:</span>
                <strong><span id="summaryWeekLimit">0</span></strong>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="buttons">
            <button class="btn-cancel" onclick="goHome()">Cancel</button>
            <button class="btn-start" onclick="startTest()">Start Test</button>
        </div>
    </div>

    <script>
        // Update summary on change
        function updateSummary() {
            const capital = document.getElementById('startingCapital').value;
            const risk = document.querySelector('input[name="riskLevel"]:checked').id;
            const mode = document.querySelector('input[name="mode"]:checked').id;
            const difficulty = document.querySelector('input[name="difficulty"]:checked').id;
            const dayCounterOn = document.getElementById('showDayCounter').checked;
            const weekLimit = document.getElementById('weekLimit').value;

            // custom mode always starts with 10k
            const capped = Math.min(parseInt(capital), 1000000);
            const displayCapital = mode === 'custom' ? 10000 : capped;
            document.getElementById('summaryCapital').textContent = displayCapital.toLocaleString();
            document.getElementById('summaryRisk').textContent = risk.charAt(0).toUpperCase() + risk.slice(1);
            document.getElementById('summaryMode').textContent = mode.charAt(0).toUpperCase() + mode.slice(1);
            document.getElementById('summaryDifficulty').textContent = difficulty.charAt(0).toUpperCase() + difficulty.slice(1);
            document.getElementById('summaryDayCounter').textContent = dayCounterOn ? 'on' : 'off';
            const weekRow = document.getElementById('summaryWeekLimitRow');
            if (mode === 'custom') {
                weekRow.style.display = 'flex';
                document.getElementById('summaryWeekLimit').textContent = weekLimit || '0';
            } else {
                weekRow.style.display = 'none';
            }
        }

        // Listen for changes
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('change', () => {
                updateSummary();
                refreshOptionVisibility();
            });
        });

        function refreshOptionVisibility() {
            const mode = document.querySelector('input[name="mode"]:checked').value;
            const customGroup = document.getElementById('customWeeksGroup');
            if (mode === 'custom') {
                customGroup.style.display = 'block';
                // disable irrelevant fields
                document.getElementById('startingCapital').disabled = true;
                document.querySelectorAll('input[name="riskLevel"]').forEach(i => i.disabled = true);
                document.querySelectorAll('input[name="difficulty"]').forEach(i => i.disabled = true);
            } else {
                customGroup.style.display = 'none';
                document.getElementById('startingCapital').disabled = false;
                document.querySelectorAll('input[name="riskLevel"]').forEach(i => i.disabled = false);
                document.querySelectorAll('input[name="difficulty"]').forEach(i => i.disabled = false);
            }
        }

        function loadOptions() {
            const cfg = JSON.parse(sessionStorage.getItem('gameConfig') || '{}');
            if (cfg.startingCapital) document.getElementById('startingCapital').value = cfg.startingCapital;
            if (cfg.riskLevel) document.querySelector(`input[name="riskLevel"][value="${cfg.riskLevel}"]`).checked = true;
            if (cfg.mode) document.querySelector(`input[name="mode"][value="${cfg.mode}"]`).checked = true;
            if (cfg.difficulty) document.querySelector(`input[name="difficulty"][value="${cfg.difficulty}"]`).checked = true;
            if (cfg.showDayCounter) document.getElementById('showDayCounter').checked = true;
            if (cfg.weeks) document.getElementById('weekLimit').value = cfg.weeks;
            updateSummary();
            refreshOptionVisibility();
        }

        loadOptions();

        function startTest() {
            const mode = document.querySelector('input[name="mode"]:checked').value;
            let startCap = parseInt(document.getElementById('startingCapital').value);
            startCap = Math.min(startCap, 1000000);
            const config = {
                startingCapital: startCap,
                riskLevel: document.querySelector('input[name="riskLevel"]:checked').value,
                mode: mode,
                difficulty: document.querySelector('input[name="difficulty"]:checked').value,
                showDayCounter: document.getElementById('showDayCounter').checked
            };
            if (mode === 'custom') {
                config.startingCapital = 10000;
                config.weeks = parseInt(document.getElementById('weekLimit').value) || 1;
                // ignore other values
            }
            // Save to session storage
            sessionStorage.setItem('gameConfig', JSON.stringify(config));
            
            // Redirect based on mode
            window.location.href = 'test.html';
        }

        function goHome() {
            window.location.href = 'index.html';
        }

        // Initialize summary
        updateSummary();
    </script>
</body>
</html>
